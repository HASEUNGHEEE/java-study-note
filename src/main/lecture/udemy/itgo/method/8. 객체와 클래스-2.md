# 8. ê°ì²´ì™€ í´ë˜ìŠ¤-2

## ë³€ìˆ˜ì˜ ë²”ìœ„(scope)

- ë³€ìˆ˜ì˜ ì„ ì–¸ ìœ„ì¹˜ì— ë”°ë¼ ë³€ìˆ˜ì˜ ì¢…ë¥˜(ë©¤ë²„ë³€ìˆ˜, ì§€ì—­ë³€ìˆ˜)ì™€ ë²”ìœ„(scope)ì´ ê²°ì •ëœë‹¤.

```java
public class Student { 
    // ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ ë³€ìˆ˜(í•„ë“œ)
    String name;
    int age;
    
    // ì •ì (static) ë©¤ë²„ ë³€ìˆ˜
    static int studentNumber;
    
    public void method() {
        // ì§€ì—­ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ ì´ˆê¸°í™”ë¥¼ í•´ì•¼ í•œë‹¤.
        int temp = 0;
        System.out.println(temp);
    }
}
```

|         ë³€ìˆ˜ì˜ ì¢…ë¥˜         |  ì„ ì–¸ ìœ„ì¹˜  |                              ìƒì„±ì‹œê¸°                              |
|:----------------------:|:-------:|:--------------------------------------------------------------:|
| í´ë˜ìŠ¤ ë³€ìˆ˜, ì •ì (static) ë³€ìˆ˜  | í´ë˜ìŠ¤ ì˜ì—­  |              í´ë˜ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°ˆ ë•Œ(ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ì‚¬ìš© ê°€ëŠ¥)              |
|        ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜         | í´ë˜ìŠ¤ ì˜ì—­  |                     ë¬´ì¡°ê±´ new ì—°ì‚°ìë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ                      |
|         ì§€ì—­ ë³€ìˆ˜          | ë©”ì„œë“œ ì˜ì—­  | ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ ìƒê²¨ë‚˜ê³ , ë©”ì„œë“œ ì¢…ë£Œ ì‹œ ì†Œë©¸ë¨(ì´ˆê¸°í™”ê°€ ë°˜ë“œì‹œ í•„ìš”í•¨, static ë³€ìˆ˜ ì‚¬ìš© ëª» í•¨)  |

## ë³€ìˆ˜ì˜ ì¢…ë¥˜

### ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(Instance Variable)

- new ì—°ì‚°ìë¡œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë¬´ì¡°ê±´ ë…ë¦½ì ì¸ ì €ì¥ê³µê°„ì„ ì§€ë‹Œë‹¤.
- ê°ê°ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ë‹¤ë¥¸ ê°’ ì €ì¥ ê°€ëŠ¥í•˜ë‹¤.
- **ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„, `ì°¸ì¡°ë³€ìˆ˜ëª….ì¸ìŠ¤í„´ìŠ¤ë³€ìˆ˜ëª…` ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤.**
- ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„, ì°¸ì¡°ë³€ìˆ˜ê°€ ì°¸ì¡°ë¥¼ ì—†ì• ë²„ë¦¬ë©´ ìë™ìœ¼ë¡œ ì“°ë ˆê¸° ì¸ìŠ¤í„´ìŠ¤ê°€ ëœë‹¤.
    - Garbage Collectorì— ì˜í•´ ìë™ ì†Œë©¸ëœë‹¤.

### í´ë˜ìŠ¤(ì •ì ) ë³€ìˆ˜ (Class(Static) Variable)

- ê°™ì€ í´ë˜ìŠ¤ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ê³µìœ í•˜ëŠ” ë³€ìˆ˜(ê³µìœ ë³€ìˆ˜)
- **ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì—†ì´ `í´ë˜ìŠ¤ëª….í´ë˜ìŠ¤ë³€ìˆ˜ëª…` ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤.**
- í´ë˜ìŠ¤ê°€ ë¡œë”©ë  ë•Œ ìƒì„±ë˜ê³ , í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë  ë•Œ ì†Œë©¸ëœë‹¤.
    - publicì´ ë¶™ìœ¼ë©´ ì „ì—­ë³€ìˆ˜)

### ì§€ì—­ ë³€ìˆ˜(Local Variable)

- **ë©”ì„œë“œ ë‚´ì— ì„ ì–¸ë˜ë©°, ë©”ì„œë“œì˜ ì¢…ë£Œì™€ í•¨ê»˜ ì†Œë©¸ëœë‹¤.**
    - **ë°˜ë“œì‹œ ì´ˆê¸°í™” í•„ìš”í•˜ë‹¤!**
- ë©”ì„œë“œ { } ë‚´ì— ì„ ì–¸ëœ ì§€ì—­ë³€ìˆ˜ëŠ” ë¸”ë¡ì„ ë²—ì–´ë‚˜ë©´ ì†Œë©¸ëœë‹¤.


### ğŸ’¡ í´ë˜ìŠ¤(ì •ì ) ë³€ìˆ˜ì™€ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜

- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ëŠ” ìƒì„±ë  ë•Œë§ˆë‹¤ ë…ë¦½ì ì¸ ê³µê°„ì´ ìƒê²¨ ê°ê¸° ë‹¤ë¥¸ ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆì§€ë§Œ
- í´ë˜ìŠ¤ ë³€ìˆ˜ëŠ” ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ í•˜ë‚˜ì˜ ì €ì¥ ê³µê°„ì„ ê³µìœ í•˜ë¯€ë¡œ í•­ìƒ ë˜‘ê°™ì€ ê°’ì„ ê°–ëŠ” ê²ƒì— ì£¼ëª©í•˜ì.

```java
class Card {
    // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜
    String color; // ìƒ‰ìƒ
    String company; // íšŒì‚¬ëª…
    
    // í´ë˜ìŠ¤ ë³€ìˆ˜
    static int width = 100; // í­
    static int height = 50; // ë†’ì´
}
```

---

## ë©”ì„œë“œ(method)ì˜ ì •ì˜ì™€ ì‘ì„±ì§€ì¹¨

- **ë©”ì„œë“œëŠ” ì‘ì—…(ê¸°ëŠ¥)ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ëª…ë ¹ë¬¸ë“¤ì˜ ì§‘í•©**
- ë©”ì„œë“œëŠ” **ì„ ì–¸ë¶€ì™€ êµ¬í˜„ë¶€**ë¡œ ë‚˜ë‰œë‹¤.
- ë§¤ê°œë³€ìˆ˜(ì¸ìê°’, Arguments, íŒŒë¼ë¯¸í„°)ë¡œ ê°’ì„ ë°›ì•„ì„œ ê·¸ ê²°ê³¼ë¥¼ ë¦¬í„´ê°’(ë°˜í™˜ê°’)ìœ¼ë¡œ ëŒë ¤ì¤€ë‹¤.
- ì¥ì ìœ¼ë¡œëŠ” **ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³ , ì½”ë“œì˜ ê´€ë¦¬ê°€ ìš©ì´**í•˜ë‹¤.
- ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤ê³  íŒë‹¨ë˜ëŠ” ì—¬ëŸ¬ ë¬¸ì¥ì´ ìˆë‹¤ë©´, ë©”ì„œë“œë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- **í•˜ë‚˜ì˜ ë©”ì„œë“œëŠ” í•œ ê°€ì§€ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ì‘ì„±**í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

### ë©”ì„œë“œ êµ¬í˜„ ì½”ë“œ

- ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ë°©ë²•(í´ë˜ìŠ¤ ì˜ì—­ì—ë§Œ ì •ì˜í•  ìˆ˜ ìˆë‹¤)

```java
// ì„ ì–¸ë¶€
public int add(int a, int b) { 
    // êµ¬í˜„ë¶€(ì •ì˜ë¶€) {}
    int result = a + b;
    
    // returnì˜ ê°’ì€ ì„ ì–¸ë¶€ì˜ ë°ì´í„° íƒ€ì…ê³¼ ë°˜ë“œì‹œ ì¼ì¹˜
    return result;
}

// return ê°’ì´ ì—†ëŠ” ê²½ìš°, void íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤.
public void power() {
    this.power = != power;
    
    // return ê°’ì´ ì—†ì„ ê²½ìš°, returnë§Œ ì¨ë„ ë˜ê³  ìƒëµí•´ë„ ë¬´ë°©í•˜ë‹¤.
    return;
}
```

---

## JVMì˜ ë©”ëª¨ë¦¬ êµ¬ì¡°

### ë©”ì„œë“œ ì˜ì—­(Method Area), í´ë˜ìŠ¤ ì˜ì—­, static ì˜ì—­

- í´ë˜ìŠ¤ ì •ë³´ì™€ í´ë˜ìŠ¤ ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ê³³
- `static`ì´ ë¶™ì€ ë³€ìˆ˜ë‚˜ ë©”ì„œë“œê°€ ì €ì¥ëœë‹¤.

### í˜¸ì¶œ ìŠ¤íƒ(Call Stack)

- **í›„ì…ì„ ì¶œ(LIFO; Last In First Out) ê°œë…**
- **ë©”ì„œë“œì˜ ì‘ì—…ê³µê°„**
- ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ ë©”ì„œë“œ ìˆ˜í–‰ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹ë°›ê³  ë©”ì„œë“œê°€ ì¢…ë£Œë˜ë©´ ì‚¬ìš©í•˜ë˜ ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜í•œë‹¤.

### í™(Heap)

- **ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ê³µê°„**
- `new ì—°ì‚°ì`ì— ì˜í•´ì„œ ìƒì„±ë˜ëŠ” ë°°ì—´ê³¼ ê°ì²´ëŠ” ëª¨ë‘ ì—¬ê¸°ì— ìƒì„±ëœë‹¤.

## Call Stack(í˜¸ì¶œ ìŠ¤íƒ) ì˜ˆì œì™€ ë©”ëª¨ë¦¬ ìƒíƒœ

```java
public static void main(String[] args) {
    // staticì€ staticë§Œ ë¶€ë¥¼ ìˆ˜ ìˆë‹¤.
    CallStackExample.first();
}

public static void first() {
    second();
}

public static void second() {
    System.out.println("second()");
}
```
![call stack ë©”ëª¨ë¦¬ ìƒíƒœ](https://user-images.githubusercontent.com/107941880/211200501-a99460b0-64dd-4afc-b05a-b0f68e10b3bc.png)




## ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜ì™€ ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜

### ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜

> **ë™ìƒì—ê²Œ â€œëª‡ ì‹œë‹ˆ?â€ ë¼ê³  ë¬»ëŠ” ê¼´ - read only**
>
- í”íˆ, Cì–¸ì–´ì—ì„œ `call by value` ë¼ê³  ë¶ˆë¦¬ë©°, **ë©”ì„œë“œ í˜¸ì¶œ ì‹œì— ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì£¼ëŠ” ê°’ì€ ë©”ì„œë“œì˜ ì§€ì—­ë³€ìˆ˜ë¡œ ë³µì‚¬ê°€ ì´ë£¨ì–´ì§€ëŠ” í˜•íƒœ**
- ìˆ˜ì •ì„ í•´ë„ í˜¸ì¶œí•œ ë©”ì„œë“œì˜ ê°’ì—ëŠ” ì „í˜€ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

```java
class A {
    int data;
}

public class PrimitiveParam {
    public static void main(String[] args) {
    
        A a = new A();
        a.data = 77;
        System.out.println("main() ë©”ì„œë“œ ë‚´ data ê°’ : " + a.data);
        // ì•„ë˜ ë©”ì„œë“œ í˜¸ì¶œì€ ì‹¤ì œ ê°’ì„ ë„˜ê¸°ê³  ìˆë‹¤. [Call By Value]
        PrimitiveParam.dataChange(a.data);
        System.out.println("dataChange() í˜¸ì¶œ í›„");
        System.out.println("main() ë©”ì„œë“œ ë‚´ data ê°’ : " + a.data); // 77
        /*
        Call By Value: ê°’ì— ì˜í•œ ë³µì‚¬ì˜ ê°œë…
        
        dataChange(a.data)ë¥¼ í˜¸ì¶œ ì‹œ, ë§¤ê°œë³€ìˆ˜ê°€ í˜¸ì¶œí•œ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë³µì‚¬ê°€ ëœë‹¤.
        ë©”ì¸ë©”ì„œë“œê°€ ìŠ¤íƒì— ë¨¼ì € ìŒ“ì´ê³ , dataChange(int data)ê°€ ìœ„ì— ìŒ“ì´ëŠ” í˜•íƒœ
        ê²°ë¡ ì ìœ¼ë¡œ, ê°’ ë³µì‚¬ëŠ” í˜¸ì¶œí•œ ê³³ì—ëŠ” ì „í˜€ ì˜í–¥ì„ ë¼ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
        */
    }
    
    // staticì€ staticë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    public static void dataChange(int data) {
        data = 44;
        System.out.println("dataChange() ë©”ì„œë“œ ë‚´ data ê°’ : " + data); // 44
    }
}
```

### ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜

> **ë™ìƒì—ê²Œ â€œì‹œê³„ ì–´ë”¨ë‹ˆ?â€ ë¼ê³  ë¬»ëŠ” ê¼´ - read & write**
>
- Cì–¸ì–´ì—ì„œ `call by reference` ë¼ê³  ë¶ˆë¦¬ë©°, **ë©”ì„œë“œ í˜¸ì¶œ ì‹œì— ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì£¼ëŠ” ê°’ì€ ì£¼ì†Œ ê°’ì„ ë„˜ê²¨ì£¼ëŠ” í˜•íƒœ**
- í˜¸ì¶œëœ ë©”ì„œë“œì—ì„œ ìˆ˜ì •ì„ í•˜ë©´, í˜¸ì¶œí•œ ë©”ì„œë“œì˜ ê°’ì—ë„ ì§ì ‘ì ìœ¼ë¡œ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.

```java
class A {
    int data;
}

public class PrimitiveParam {
    public static void main(String[] args) {
    
        A a = new A();
        a.data = 77;
        System.out.println("main() ë©”ì„œë“œ ë‚´ data ê°’ : " + a.data);
        // ì•„ë˜ ë©”ì„œë“œ í˜¸ì¶œì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œë¥¼ ë„˜ê¸°ê³  ìˆë‹¤. [Call By Reference]
        // ì¦‰, dataChange(a)ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì†Œ ê°’ì´ ë„˜ì–´ê°€ê³  ìˆë‹¤.
        PrimitiveParam.dataChange(a);
        System.out.println("dataChange() í˜¸ì¶œ í›„");
        System.out.println("main() ë©”ì„œë“œ ë‚´ data ê°’ : " + a.data); // 44
        /*
        Call By Reference: ì£¼ì†Œì— ì˜í•œ í˜¸ì¶œì˜ ê°œë…
    
        dataChange(a)ë¥¼ í˜¸ì¶œ ì‹œ, ë§¤ê°œë³€ìˆ˜ê°€ í˜¸ì¶œí•œ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì†Œê°€ ë„˜ì–´ê°€ê²Œ ë˜ì–´
        ì£¼ì†Œ ê³µìœ ê°€ ì¼ì–´ë‚œë‹¤.
        ë©”ì¸ë©”ì„œë“œê°€ ìŠ¤íƒì— ë¨¼ì € ìŒ“ì´ê³ , dataChange(A a)ê°€ ìœ„ì— ìŒ“ì´ëŠ” í˜•íƒœ
        ê²°ë¡ ì ìœ¼ë¡œ, ì£¼ì†Œì— ì˜í•œ í˜¸ì¶œì€ í˜¸ì¶œí•œ ê³³ì— ì§ì ‘ì ìœ¼ë¡œ ì˜í–¥ì„ ë¼ì¹œë‹¤.
        */
    }
    
    // staticì€ staticë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    public static void dataChange(A a) {
        a.data = 44;
        System.out.println("dataChange() ë©”ì„œë“œ ë‚´ data ê°’ : " + a.data); // 44
    }
}
```

---

## ì¬ê·€ í˜¸ì¶œ(recursive call)

- **ë©”ì„œë“œ ë‚´ì—ì„œ ìê¸°ìì‹ ì„ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒ**
- ì–¼ë§ˆë“ ì§€ ë°˜ë³µë¬¸ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
- ì¥ì  : ì½”ë“œê°€ ê°„ê²°í•˜ê³  ê°€ë…ì„±ì´ ì¢‹ì•„ ë§ì´ ì‚¬ìš©í•œë‹¤.
- ë‹¨ì  :  ë°˜ë³µë¬¸ë³´ë‹¤ ì„±ëŠ¥ì´ ë–¨ì–´ì§„ë‹¤. (ìŠ¤íƒì— ê³„ì† ìŒ“ì¸ë‹¤)
- ì˜ˆì‹œ) íŒ©í† ë¦¬ì–¼, ì œê³±, íŠ¸ë¦¬, í´ë”ëª©ë¡ ë“±

### ì¬ê·€ í˜¸ì¶œì˜ ì˜ˆ(íŒ©í† ë¦¬ì–¼)

```java
/*
íŒ©í† ë¦¬ì–¼(factorial)
4! = 4 * 3 * 2 * 1

f(n) = n * f(n-1) ë‹¨, f(1) = 1
*/

public class FactorialEx {
    public static void main(String[] args) {
        long result = factorial(4L);
        System.out.println("4!(íŒ©í† ë¦¬ì–¼) ê°’ : " + result);
    }
    
    // ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” ì¬ê·€
    // for ë¬¸ìœ¼ë¡œ í•´ë„ ë˜ì§€ë§Œ, ê°€ë…ì„±ê³¼ ì½”ë“œ ì¤‘ë³µ ì œê±°ì— ì¢‹ë‹¤.
    public static long factorial(long n) {
        long result = 0L;
        // ë¹„ë¡œì†Œ 1ì¼ ë•Œ, ì¬ê·€í˜¸ì¶œì´ ì¢…ë£Œëœë‹¤. f(1) = 1 ì´ê¸° ë•Œë¬¸ì—
        if (n == 1) {
            result = 1;
        } else {
            System.out.println("result ê°’ : " + result + " n ê°’ : " + n);
            result = n * factorial(n-1); // ë©”ì„œë„ ìì‹ ì„ í˜¸ì¶œí•œë‹¤.
        }
        return result;
    }
} 
```
